import{v as Q}from"./video.js-776d3046.js";import{d as X,t as Y,s as z,e as V,r as Z,f as _,w as x,g as ee,h as H,n as A,i as ne}from"./@vue-7344105e.js";function I(e,n){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)n.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(a[r[s]]=e[r[s]])}return a}var te={src:{type:String,onChange:function(e,n){return e.src(n)}},width:{type:Number,onChange:function(e,n){return e.width(n)},onEvent:function(e,n){e.on(["playerresize","resize"],function(){return n(e.width())})}},height:{type:Number,onChange:function(e,n){return e.height(n)},onEvent:function(e,n){e.on(["playerresize","resize"],function(){return n(e.height())})}},preload:{type:String,onChange:function(e,n){return e.preload(n)}},loop:{type:Boolean,onChange:function(e,n){return e.loop(n)}},muted:{type:Boolean,onChange:function(e,n){return e.muted(n)},onEvent:function(e,n){return e.on("volumechange",function(){return n(e.muted())})}},poster:{type:String,onChange:function(e,n){return e.poster(n)},onEvent:function(e,n){return e.on("posterchange",function(){return n(e.poster())})}},controls:{type:Boolean,onChange:function(e,n){return e.controls(n)},onEvent:function(e,n){e.on("controlsenabled",function(){return n(!0)}),e.on("controlsdisabled",function(){return n(!1)})}},autoplay:{type:[Boolean,String],onChange:function(e,n){return e.autoplay(n)}},crossorigin:{type:String,onChange:function(e,n){return e.crossOrigin(n)}},crossOrigin:{type:String,onChange:function(e,n){return e.crossOrigin(n)}},playsinline:{type:Boolean,onChange:function(e,n){return e.playsinline(n)}},playsInline:{type:Boolean,onChange:function(e,n){return e.playsinline(n)}}},re={id:{type:String},sources:{type:Array,onChange:function(e,n){return e.src(n)}},tracks:{type:Array,onChange:function(e,n){for(var a=e.remoteTextTracks(),r=(a==null?void 0:a.length)||0;r--;)e.removeRemoteTextTrack(a[r]);e.ready(function(){n.forEach(function(s){return e.addRemoteTextTrack(s,!1)})})}},textTrackSettings:{type:Object,onChange:function(e,n){return e.textTrackSettings.options(n)}},language:{type:String,onChange:function(e,n){return e.language(n)},onEvent:function(e,n){return e.on("languagechange",function(){return n(e.language())})}},languages:{type:Object},playbackRates:{type:Array,onChange:function(e,n){return e.playbackRates(n??[])},onEvent:function(e,n){e.on("playbackrateschange",function(){return n(e.playbackRates())})}},audioOnlyMode:{type:Boolean,onChange:function(e,n){return e.audioOnlyMode(n)}},audioPosterMode:{type:Boolean,onChange:function(e,n){return e.audioPosterMode(n)}},responsive:{type:Boolean,onChange:function(e,n){return e.responsive(n)}},breakpoints:{type:Object,onChange:function(e,n){return e.breakpoints(n)}},fluid:{type:Boolean,onChange:function(e,n){return e.fluid(n)}},fill:{type:Boolean,onChange:function(e,n){return e.fill(n)}},aspectRatio:{type:String,onChange:function(e,n){return e.aspectRatio(n)}},fullscreen:{type:Object},liveui:{type:Boolean},liveTracker:{type:Object},disablePictureInPicture:{type:Boolean,onChange:function(e,n){return e.disablePictureInPicture(n)}},notSupportedMessage:{type:String},normalizeAutoplay:{type:Boolean},noUITitleAttributes:{type:Boolean},preferFullWindow:{type:Boolean},suppressNotSupportedError:{type:Boolean},techCanOverridePoster:{type:Boolean},reportTouchActivity:{type:Boolean},techOrder:{type:Array},inactivityTimeout:{type:Number},userActions:{type:Object},plugins:{type:Object},restoreEl:{type:[Boolean,Object]},"vtt.js":{type:String}},oe={children:{type:[Array,Object]},controlBar:{type:Object,onChange:function(e,n){return e.controlBar.options(n)}}},ae={html5:{type:Object}},ie={volume:{type:Number,onChange:function(e,n){return e.volume(n)},onEvent:function(e,n){return e.on("volumechange",function(){return n(e.volume())})}},playbackRate:{type:Number,onChange:function(e,n){e.playbackRate(n),e.defaultPlaybackRate(n)},onEvent:function(e,n){e.on("ratechange",function(){n(e.playbackRate())})}},options:{type:Object}},j=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},te),re),oe),ae),ie),W=Object.keys(j),$=Object.assign(Object.assign(Object.assign(Object.assign({},{loadstart:"onLoadStart",suspend:"onSuspend",abort:"onAbort",error:"onError",emptied:"onEmptied",stalled:"onStalled",loadedmetadata:"onLoadedMetadata",loadeddata:"onLoadedData",canplay:"onCanPlay",canplaythrough:"onCanPlayThrough",playing:"onPlaying",waiting:"onWaiting",seeking:"onSeeking",seeked:"onSeeked",ended:"onEnded",durationchange:"onDurationChange",timeupdate:"onTimeUpdate",progress:"onProgress",play:"onPlay",pause:"onpause",ratechange:"onRateChange",resize:"onResize",volumechange:"onVolumeChange"}),{posterchange:"onPosterChange",languagechange:"onLanguageChange",fullscreenchange:"onFullscreenChange",playbackrateschange:"onPlaybackRatesChange",controlsdisabled:"onControlsDisabled",controlsenabled:"onControlsEnabled",enterFullWindow:"onEnterFullWindow",exitFullWindow:"onExitFullWindow",enterpictureinpicture:"onEnterPictureInPicture",leavepictureinpicture:"onLeavePictureInPicture",sourceset:"onSourceSet",texttrackchange:"onTextTrackChange",textdata:"onTextData",useractive:"onUserActive",userinactive:"onUserInactive",usingcustomcontrols:"onUsingCustomControls",usingnativecontrols:"onUsingNativeControls",dispose:"onDispose"}),{beforepluginsetup:"onBeforePluginSetup",pluginsetup:"onPluginSetup"}),{componentresize:"onComponentResize",playerresize:"onPlayerResize",ready:"onReady",tap:"onTap"}),q=Object.keys($);Object.values($);var N=function(e){var n,a=e==null?void 0:e.trim().replace(/\s+/g," ");return a&&(n=a.split(" "))!==null&&n!==void 0?n:[]},F={src:{getter:function(e){return e.src()}},currentSrc:{getter:function(e){return e.currentSrc()}},currentSource:{getter:function(e){return e.currentSource()}},width:{events:["resize","playerresize"],getter:function(e){return e.width()}},height:{events:["resize","playerresize"],getter:function(e){return e.height()}},currentWidth:{events:["resize","playerresize"],getter:function(e){return e.currentWidth()}},currentHeight:{events:["resize","playerresize"],getter:function(e){return e.currentHeight()}},videoWidth:{events:["resize","playerresize"],getter:function(e){return e.videoWidth()}},videoHeight:{events:["resize","playerresize"],getter:function(e){return e.videoHeight()}},controls:{events:["controlsdisabled","controlsenabled"],getter:function(e){return e.controls()}},volume:{events:["volumechange"],getter:function(e){return e.volume()}},muted:{events:["volumechange"],getter:function(e){return e.muted()}},poster:{events:["posterchange"],getter:function(e){return e.poster()}},seeking:{events:["seeking"],getter:function(e){return e.seeking()}},paused:{events:["pause","play","playing"],getter:function(e){return e.paused()}},ended:{events:["ended","play"],getter:function(e){return e.ended()}},currentTime:{events:["timeupdate"],getter:function(e){return e.currentTime()}},duration:{events:["durationchange"],getter:function(e){return e.duration()}},playbackRate:{events:["ratechange"],getter:function(e){return e.playbackRate()}},playbackRates:{events:["playbackrateschange"],getter:function(e){return e.playbackRates()}},isFullscreen:{events:["fullscreenchange"],getter:function(e){return e.isFullscreen()}},isInPictureInPicture:{events:["enterpictureinpicture","leavepictureinpicture"],getter:function(e){return e.isInPictureInPicture()}},isLive:{getter:function(e){var n;return(n=e.liveTracker)===null||n===void 0?void 0:n.isLive()}},language:{events:["languagechange"],getter:function(e){return e.language()}},userActive:{events:["useractive","userinactive"],getter:function(e){return e.userActive()}},readyState:{events:["loadeddata"],getter:function(e){return e.readyState()}},networkState:{events:["loadeddata","error"],getter:function(e){return e.networkState()}},error:{events:["loadeddata","error"],getter:function(e){return e.error()}},buffered:{events:["progress"],getter:function(e){return e.buffered()}},bufferedPercent:{events:["progress"],getter:function(e){return e.bufferedPercent()}},played:{events:["timeupdate"],getter:function(e){return e.played()}},seekable:{events:["progress","seeked"],getter:function(e){return e.seekable()}},audioTracks:{getter:function(e){var n;return(n=e.audioTracks)===null||n===void 0?void 0:n.call(e)}},videoTracks:{getter:function(e){var n;return(n=e.videoTracks)===null||n===void 0?void 0:n.call(e)}},textTracks:{getter:function(e){var n;return(n=e.textTracks)===null||n===void 0?void 0:n.call(e)}}},G=W.filter(function(e){return!!j[e].onEvent}),J=function(e){return"update:"+e},ue=q.concat(G.map(J)),ce=W.reduce(function(e,n){var a,r=j[n],s=Array.isArray(r.type)?r.type:[r.type],k=Object.assign({},r);return s.includes(Boolean)&&(k.default=void 0),Object.assign(Object.assign({},e),((a={})[n]=k,a))},{}),T=X({name:"VueVideoPlayer",props:Object.assign(Object.assign({},ce),{class:[String,Object,Array]}),emits:ue.concat(["mounted"],["unmounted"]),setup:function(e,n){var a=Y(e),r=a.class,s=I(a,["class"]),k=z(!1),P=z(null),b=z(null),U=V(function(){return b.value?b.value.player:null}),m=Z(null),L=V(function(){return m.value?ne(m.value):null});return _(function(){var O,g=function(t){var o,l=t.props,d=t.element,f=t.className,p=t.onEvent,i=l.options;i===void 0&&(i={});var v=I(l,["options"]),M={};Object.keys(v).forEach(function(u){var c=v[u];c!==void 0&&(M[u]=c)});var B=Object.assign(Object.assign({},M),i),R=B.volume,S=B.playbackRate,C=I(B,["volume","playbackRate"]),K=Object.assign(Object.assign({},C),{playsinline:(o=C.playsinline)!==null&&o!==void 0?o:C.playsInline}),y=Q(d,K,function(){var u=this;q.forEach(function(c){u.on(c,function(h){p(c,h)})}),C.src&&!C.sources&&this.src(C.src),R&&Number.isFinite(R)&&this.volume(R),S&&Number.isFinite(S)&&(this.defaultPlaybackRate(S),setTimeout(function(){u.playbackRate(S)},0))});f&&N(f).map(function(u){return y.addClass(u)});var D=function(u){var c;(c=y.options)===null||c===void 0||c.call(y,u??{})};return{player:y,dispose:function(){return y.dispose()},updateClassNames:function(u,c){N(u).map(function(h){return y.removeClass(h)}),N(c).map(function(h){return y.addClass(h)})},updateOptions:D,updatePropOption:function(u,c){var h,E,w;D(((h={})[u]=c,h)),(w=(E=j[u])===null||E===void 0?void 0:E.onChange)===null||w===void 0||w.call(E,y,c)}}}({element:P.value,props:s,onEvent:n.emit});O={player:g.player,onEvent:n.emit},G.forEach(function(t){var o,l;(l=(o=j[t])===null||o===void 0?void 0:o.onEvent)===null||l===void 0||l.call(o,O.player,function(d){O.onEvent(J(t),d)})}),x(function(){return e.class},function(t,o){var l=A(o),d=A(t);g.updateClassNames(l,d)},{immediate:!0}),x(function(){return e.options},function(t){return g.updateOptions(t??{})},{deep:!0}),W.filter(function(t){return t!=="options"}).forEach(function(t){x(function(){return e[t]},function(o){return g.updatePropOption(t,o)},{deep:!0})}),function(t,o){var l=Object.keys(F),d=l.reduce(function(p,i){var v;return Object.assign(Object.assign({},p),((v={})[i]=F[i].getter(t),v))},{playing:!1,waiting:!1}),f=function(p,i){d[p]=i,o.onUpdate(p,i,Object.assign({},d))};t.on(["pause","ended"],function(){f("playing",!1)}),t.on(["play","playing"],function(){f("playing",!0)}),t.on("waiting",function(){f("waiting",!0);var p=t.currentTime(),i=function(){p!==t.currentTime()&&(f("waiting",!1),t.off("timeupdate",i))};t.on("timeupdate",i)}),l.forEach(function(p){var i,v=F[p];t.on(["loadstart","loadedmetadata"].concat((i=v.events)!==null&&i!==void 0?i:[]),function(){f(p,v.getter(t))})}),o.onInit(Object.assign({},d))}(g.player,{onInit:function(t){m.value=t},onUpdate:function(t,o){m.value&&(m.value[t]=o)}}),b.value=g,k.value=!0,n.emit("mounted",{video:P.value,player:U.value,state:L.value})}),ee(function(){b.value&&(b.value.dispose(),b.value=null,m.value=null,n.emit("unmounted"))}),function(){var O,g;return H("div",{"data-vjs-player":"",class:A(r)},[H("video",{class:["video-js","v-video-player"],ref:P}),k.value&&((g=(O=n.slots).default)===null||g===void 0?void 0:g.call(O,{video:P.value,player:U.value,state:L.value}))])}}}),se=function(e){e.component("VideoPlayer",T),e.component(T.name,T)},ge={VideoPlayer:T,install:se};export{ge as w};
