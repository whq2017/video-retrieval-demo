import{r as b,a0 as O,ah as d,o as f,Q as V,R as c,X as u,a as h,V as k,u as q,c as $,W as R,aw as H,ax as N,f as B,aa as U,F as j,e as T,U as W,as as D}from"./@vue-7344105e.js";import{u as E,R as M,a as F,c as z,b as Q}from"./vue-router-5e4fe031.js";import{E as C,a as X,i as G}from"./element-plus-8558d3ca.js";import{a as J}from"./axios-707ed124.js";import{Q as Y}from"./@element-plus-c8441a8a.js";import"./bootstrap-7cd6811b.js";import{w as Z}from"./@videojs-player-7dead9da.js";import"./video.js-776d3046.js";import"./lodash-es-36eb724a.js";import"./@vueuse-28d36668.js";import"./@popperjs-535f9a41.js";import"./@ctrl-f8748455.js";import"./dayjs-9e5a5b97.js";import"./@babel-6bc93e59.js";import"./async-validator-1066f8a0.js";import"./memoize-one-297ddbcb.js";import"./escape-html-1d60d822.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-463e90e0.js";import"./global-4fcc2b24.js";import"./keycode-eee83230.js";import"./safe-json-parse-e9887455.js";import"./@videojs-1f35f7f9.js";import"./is-function-da9589a5.js";import"./url-toolkit-ab59c30c.js";import"./videojs-vtt.js-6e0f624b.js";import"./m3u8-parser-51b1d66f.js";import"./mpd-parser-e104382d.js";import"./@xmldom-10c99218.js";import"./mux.js-09abadc7.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function o(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(t){if(t.ep)return;t.ep=!0;const a=o(t);fetch(t.href,a)}})();const P=(e,r)=>{const o=e.__vccOpts||e;for(const[n,t]of r)o[n]=t;return o},ee={class:"dialog-footer"},te={__name:"HomeHeader",setup(e){const r=E(),o=b(!1),n=O({inputSearchKey:""}),t=()=>{if(n.inputSearchKey===void 0||n.inputSearchKey===null||n.inputSearchKey.trim()===""){C({message:"search key is empty.Please input infomation again!",type:"error",duration:5*1e3});return}o.value=!1,console.log("search: ",n.inputSearchKey),r.push({name:"search",query:{key:n.inputSearchKey}})},a=()=>{o.value=!0,n.inputSearchKey=""},l=()=>{r.push({name:"home"})};return(g,m)=>{const y=d("el-col"),_=d("el-button"),v=d("el-input"),w=d("el-form-item"),K=d("el-form"),i=d("el-dialog"),s=d("el-row");return f(),V(s,{type:"flex",justify:"space-around",class:"header-row"},{default:c(()=>[u(y,{span:16},{default:c(()=>[h("span",{class:"header-title",onClick:l},"Text to Video Search")]),_:1}),u(y,{span:6},{default:c(()=>[u(_,{icon:"Search",onClick:a,round:"",text:""},{default:c(()=>[k("Search")]),_:1})]),_:1}),u(i,{modelValue:o.value,"onUpdate:modelValue":m[2]||(m[2]=S=>o.value=S),title:"Please input search infomation"},{footer:c(()=>[h("span",ee,[u(_,{onClick:m[1]||(m[1]=S=>o.value=!1)},{default:c(()=>[k("Cancel")]),_:1}),u(_,{type:"primary",onClick:t},{default:c(()=>[k(" Search ")]),_:1})])]),default:c(()=>[u(K,{model:n},{default:c(()=>[u(w,null,{default:c(()=>[u(v,{modelValue:n.inputSearchKey,"onUpdate:modelValue":m[0]||(m[0]=S=>n.inputSearchKey=S),placeholder:"input search key",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1})}}},oe=P(te,[["__scopeId","data-v-3aea3661"]]);const ne={__name:"App",setup(e){return(r,o)=>{const n=d("el-header"),t=d("el-main"),a=d("el-container");return f(),V(a,null,{default:c(()=>[u(n,{class:"container-header"},{default:c(()=>[u(oe)]),_:1}),u(t,{class:"container-main"},{default:c(()=>[(f(),V(q(M),{key:r.$route.fullPath}))]),_:1})]),_:1})}}},ae=P(ne,[["__scopeId","data-v-bca771a8"]]);const re={class:"search-main bg-white"},se={class:"search-input"},le={__name:"SearchView",props:{},setup(e){const r=E(),o=b(""),n=()=>{if(o.value===void 0||o.value===null||o.value.trim()===""){ElMessage({message:"search key is empty.Please input infomation again!",type:"error",duration:5*1e3});return}console.log("search: ",o.value),r.push({name:"search",query:{key:o.value}})};return(t,a)=>{const l=d("el-button"),g=d("el-input");return f(),$("div",re,[h("div",se,[u(g,{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=m=>o.value=m),size:"large",placeholder:"Please input search keys","input-style":"border border-info rounded-end-circle rounded-start-pill"},{append:c(()=>[u(l,{icon:"Search",onClick:n})]),_:1},8,["modelValue"])])])}}},L=P(le,[["__scopeId","data-v-82148b07"]]);const ie=e=>(H("data-v-783b3396"),e=e(),N(),e),ce=ie(()=>h("span",{class:"card-title"},"Search Key: ",-1)),ue=["src"],pe={style:{padding:"14px"}},de={class:"bottom"},me={class:"text"},_e={__name:"ImgCard",props:{videoId:{type:String,require:!0},imgUrl:{type:String,require:!0,default:"https://shadow.elemecdn.com/app/element/hamburger.9cf7b091-55e9-11e9-a976-7f4d0b07eef6.png"},searchKey:{type:String,require:!0},sentence:{type:String,require:!1}},emits:["watch-video"],setup(e,{emit:r}){const o=e,n=t=>{console.log("videoId: ",t),r("watch-video",t)};return(t,a)=>{const l=d("el-button"),g=d("el-card");return f(),V(g,{"body-style":{padding:"0px"},shadow:"always",class:"card"},{header:c(()=>[ce,h("span",null,R(e.searchKey),1)]),default:c(()=>[h("img",{src:e.imgUrl,class:"image"},null,8,ue),h("div",pe,[h("div",de,[h("span",me,R(e.sentence.length>36?e.sentence.substring(0,36)+"...":e.sentence),1),u(l,{type:"primary",text:"",class:"button",onClick:a[0]||(a[0]=m=>n(o.videoId))},{default:c(()=>[k("Watch Video")]),_:1})])])]),_:1})}}},ye=P(_e,[["__scopeId","data-v-783b3396"]]),fe={__name:"ImgCardList",props:{imgList:{type:Object,require:!0}},emits:["player-video"],setup(e,{emit:r}){const o=e;B(()=>{console.log(o.imgList)});const n=t=>{console.log("player-video: ",t),r("player-video",t)};return(t,a)=>(f(!0),$(j,null,U(o.imgList,l=>(f(),V(ye,{key:l.videoId,"video-id":l.videoId,"img-url":l.img,"search-key":l.searchKey,sentence:l.sentence,onWatchVideo:n},null,8,["video-id","img-url","search-key","sentence"]))),128))}};const he={class:"my_video"},ge={__name:"VideoCard",props:{src:{require:!0},type:{type:String,default:"video/mp4"}},setup(e){const r=e,o=b({playbackRates:[.5,1,1.5,2],autoplay:!0,muted:!1,loop:!0,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:r.type,src:r.src}],poster:"",notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}}),n=i=>{console.log("player play!",i)},t=i=>{console.log("player pause!",i)},a=i=>{console.log(i)},l=i=>{console.log(i)},g=i=>{console.log(i)},m=i=>{console.log(i)},y=i=>{console.log(i)},_=i=>{},v=i=>{},w=i=>{console.log("player current update state",$event)},K=()=>{console.log("example player 1 readied")};return(i,s)=>{const S=d("video-player");return f(),$("div",he,[u(S,{ref:"videoPlayer",playsinline:!0,options:o.value,onPlay:s[0]||(s[0]=p=>n(p)),onPause:s[1]||(s[1]=p=>t(p)),onEnded:s[2]||(s[2]=p=>a(p)),onWaiting:s[3]||(s[3]=p=>l(p)),onPlaying:s[4]||(s[4]=p=>g(p)),onLoadeddata:s[5]||(s[5]=p=>m(p)),onTimeupdate:s[6]||(s[6]=p=>y(p)),onCanplay:s[7]||(s[7]=p=>_()),onCanplaythrough:s[8]||(s[8]=p=>v()),onStatechanged:s[9]||(s[9]=p=>w()),onReady:K},null,8,["options"])])}}},ve=P(ge,[["__scopeId","data-v-d36f7f16"]]),I=J.create({baseURL:"http://47.120.32.6:6632/api",timeout:1e5});let A;I.interceptors.request.use(e=>(A=X.service({fullscreen:!1,background:"rgba(e, e, e, 0)",text:"Loading data...."}),e),e=>{console.log(e),Promise.reject(e)});I.interceptors.response.use(e=>{A.close();const r=e.data;return r.code!==2e4?(C({message:r.message,type:"error",duration:5*1e3}),Promise.reject("error")):e.data},e=>(A.close(),console.log("err"+e),C({message:e.message,type:"error",duration:5*1e3}),Promise.reject(e)));const be={search_by_one_search_key(e){return I({url:"search_by_text",method:"get",params:{key:e}})},search_all_by_search_key(e){return I({url:"search_by_texts",method:"post",data:e})}};const Se={class:"show-main bg-white"},Ve={__name:"ShowView",setup(e){const r=E();F();const o=b([]),n=b(!1),t=b(!1),a=b(""),l=T(()=>"http://47.120.32.6:6632/api/video/"+a.value),g=y=>{n.value=!0,a.value=y,t.value=!0},m=()=>{n.value=!1,a.value="",t.value=!1};return B(()=>{let y=r.currentRoute.value.query,_=y.key;if(_==null||_.trim()===""){C.error("search key is empty.Please input infomation again!"),r.push("/");return}console.log("params:",y),be.search_by_one_search_key(y.key).then(v=>{console.log("response:",v),o.length=0,o.value=v.data})}),(y,_)=>{const v=d("el-dialog");return f(),$("div",Se,[u(fe,{"img-list":o.value,onPlayerVideo:g},null,8,["img-list"]),u(v,{modelValue:n.value,"onUpdate:modelValue":_[0]||(_[0]=w=>n.value=w),title:"正在播放",width:"60vh","destroy-on-close":"",draggable:"","before-close":m},{default:c(()=>[t.value?(f(),V(ve,{key:0,src:q(l)},null,8,["src"])):W("",!0)]),_:1},8,["modelValue"])])}}},Pe=P(Ve,[["__scopeId","data-v-f9e9c8f7"]]),we=z({history:Q("/"),routes:[{path:"/",name:"root",component:L},{path:"/home",name:"home",component:L},{path:"/index",name:"index",component:L},{path:"/search",name:"search",component:Pe}]});const x=D(ae);x.use(we);x.use(G);x.use(Z);for(const[e,r]of Object.entries(Y))x.component(e,r);x.mount("#app");
